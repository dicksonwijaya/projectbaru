<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://apis.google.com/js/api.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">


    
    <title>ShortProject</title>



    
</head>
<body>
    <nav class="navigation">
        <div class="navigation__menu">
            <!-- menu button -->
            <img class="logo" src="img/logo.jpg" width="50" height="40">
            
            <a href="index.html" style="text-decoration: none;color:black;">        <h2>短影音</h2></a>
            
        </div>
        


        <div class="navigation__options">
            <button class="sign-in-button">Sign In</button>
            <!-- user avatar -->
            <div class="navigation__avatar"></div>
        </div>

    </nav>

    <!-- SIDE NAVIGATION -->
    <div class="sidebar">
        <section class="sidebar__section"> 
            <a class="sidebar__section__link sidebar__section__link--selected" href="/">
                <svg viewBox="0 0 24 24"><g><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8"></path></g></svg>
                <span>
                    Home
                </span>
            </a>
            <a class="sidebar__section__link" href="/">
                <svg viewBox="0 0 24 24"><g><path d="M11.23 13.08c-.29-.21-.48-.51-.54-.86-.06-.35.02-.71.23-.99.21-.29.51-.48.86-.54.35-.06.7.02.99.23.29.21.48.51.54.86.06.35-.02.71-.23.99a1.327 1.327 0 01-1.08.56c-.28 0-.55-.08-.77-.25zM22 12c0 5.52-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2s10 4.48 10 10zm-3.97-6.03L9.8 9.8l-3.83 8.23 8.23-3.83 3.83-8.23z"></path></g></svg>
                <span>
                    Explore
                </span>
            </a>
            <a class="sidebar__section__link" href="/">
                <svg viewBox="0 0 24 24"><g><path d="M18.7 8.7H5.3V7h13.4v1.7zm-1.7-5H7v1.6h10V3.7zm3.3 8.3v6.7c0 1-.7 1.6-1.6 1.6H5.3c-1 0-1.6-.7-1.6-1.6V12c0-1 .7-1.7 1.6-1.7h13.4c1 0 1.6.8 1.6 1.7zm-5 3.3l-5-2.7V18l5-2.7z"></path></g></svg>
                <span>
                    Subscriptions
                </span>
            </a>
            <a class="sidebar__section__link" href="/">
                <svg viewBox="0 0 24 24"><g><path fill-rule="nonzero" d="M21.78 8s-.2-1.37-.8-1.97c-.75-.8-1.6-.8-2-.85C16.2 4.98 12 5 12 5s-4.18-.02-6.97.18c-.4.05-1.24.05-2 .85-.6.6-.8 1.97-.8 1.97s-.2 1.63-.23 3.23v1.7c.03 1.6.23 3.2.23 3.2s.2 1.4.8 2c.76.8 1.75.76 2.2.85 1.57.15 6.6.18 6.77.18 0 0 4.2 0 7-.2.38-.04 1.23-.04 2-.84.6-.6.8-1.98.8-1.98s.2-1.6.2-3.22v-1.7c-.02-1.6-.22-3.22-.22-3.22zm-11.8 7V9.16l5.35 3.03L9.97 15z"></path></g></svg>
                <span>
                    Originals
                </span>
            </a>
         
        </section>

        <section class="sidebar__section"> 
            <a class="sidebar__section__link" href="/">
                <svg viewBox="0 0 24 24"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8 12.5v-9l6 4.5-6 4.5z"></path></g></svg>
                <span>Library</span>
            </a>
            
            <a class="sidebar__section__link" href="/">
                <svg viewBox="0 0 24 24"><g><path d="M11.9 3.75c-4.55 0-8.23 3.7-8.23 8.25H.92l3.57 3.57.04.13 3.7-3.7H5.5c0-3.54 2.87-6.42 6.42-6.42 3.54 0 6.4 2.88 6.4 6.42s-2.86 6.42-6.4 6.42c-1.78 0-3.38-.73-4.54-1.9l-1.3 1.3c1.5 1.5 3.55 2.43 5.83 2.43 4.58 0 8.28-3.7 8.28-8.25 0-4.56-3.7-8.25-8.26-8.25zM11 8.33v4.6l3.92 2.3.66-1.1-3.2-1.9v-3.9H11z"></path></g></svg>
                <span>History</span>
            </a>
            
            <a class="sidebar__section__link" href="/">
                <svg viewBox="0 0 24 24"><g><path d="M18.4 5.6v12.8H5.6V5.6h12.8zm0-1.8H5.6a1.8 1.8 0 0 0-1.8 1.8v12.8a1.8 1.8 0 0 0 1.8 1.9h12.8a1.8 1.8 0 0 0 1.9-1.9V5.6a1.8 1.8 0 0 0-1.9-1.8z"></path><path d="M10.2 9v6.5l5-3.2-5-3.2z"></path></g></svg>
                <span>Your Videos</span>
            </a>
            
            <a class="sidebar__section__link" href="/">
                <svg viewBox="0 0 24 24"><g><path d="M12 3.67c-4.58 0-8.33 3.75-8.33 8.33s3.75 8.33 8.33 8.33 8.33-3.75 8.33-8.33S16.58 3.67 12 3.67zm3.5 11.83l-4.33-2.67v-5h1.25v4.34l3.75 2.25-.67 1.08z"></path></g></svg>
                <span>Watch later</span>
            </a>

            <a class="sidebar__section__link" href="/">
                <svg viewBox="0 0 24 24"><g><path d="M3.67 8.67h14V11h-14V8.67zm0-4.67h14v2.33h-14V4zm0 9.33H13v2.34H3.67v-2.34zm11.66 0v7l5.84-3.5-5.84-3.5z"></path></g></svg>
                <span>Your Playlists</span>
            </a>

            <a class="sidebar__section__link" href="/">
                <svg viewBox="0 0 24 24"><g><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g></svg>
                <span>Show more</span>
            </a>

        </section>

        

        

        <section class="sidebar__section">
            <a class="sidebar__section__link--small" href="/">About</a>
            <a class="sidebar__section__link--small" href="/">Press</a>
            <a class="sidebar__section__link--small" href="/">Copyright</a>
            <a class="sidebar__section__link--small" href="/">Contact us</a>
            
          
            <p>&#169; 2023 Google LLC</p>
        </section>
        
        </div>
        <!--main-->

        <div class="main_content">
            <div class="main_header">
                <div class="main_header_text">
                    <br><br>
                    <p>Lorem ipsum dolor sit amet, ut inani laboramus pertinacia mei, id vix minim affert.</p>
                    <button class="signup-button">Sign Up</button>
                </div>
                <div class="main_header_img">
                    <img class="ashen" src="img/fouryears.jpg" width="70" height="70" style="opacity:0.5">
                 
                    <img class="tgop" src="img/tgop.jpeg" width="70" height="70"  >
                 
                    <img class="vidol" src="img/vidol.jpg" width="70" height="70"  style="opacity:0.5">
                    <img class="roman_sharon" src="img/roman_sharon.jpg" width="70" height="70"  >
                    <img class="cdrama" src="img/cdrama.jpg" width="70" height="70" style="opacity:0.5">
                    <img class="news" src="img/news.jpg" width="70" height="70">
                    <img class="masha" src="img/masha.jpg" width="70" height="70" style="opacity:0.5">
                    <img class="ashen" src="img/ashen.jpg" width="70" height="70">
                    <img class="rock_records" src="img/rock_records.png" width="70" height="70" style="opacity:0.5">
                    <img class="yes" src="img/yes.jpg" width="70" height="70"  >

            

                </div>

            </div>
          
            <div class="main_body">

                 
                <div class="container_1" width="200" height="200">

                    <img class="hashtag" src="img/hashtag.png" width="200" height="200">
                
                </div>
              
                <div class="container_2" width="200" height="200">
                    <br>
                    <p>Lorem ipsum dolor sit amet, ut inani laboramus pertinacia mei, id vix minim affert.</p>
                 <div class="button-area">
                    <button class="hashtagButton" data-hashtag="sports">Sports</button>
                    <button class="hashtagButton" data-hashtag="音樂">Music</button>
                    <button class="hashtagButton" data-hashtag="gaming">Gaming</button>
                    <button class="hashtagButton" data-hashtag="news">News</button>
                    <button class="hashtagButton" data-hashtag="旅游">Travel</button>
                    <button class="hashtagButton" data-hashtag="comedy">Comedy</button>
                    <button class="hashtagButton" data-hashtag="education">Education</button>
                    <button class="hashtagButton" data-hashtag="fashion">Fashion</button>
                    <button class="hashtagButton" data-hashtag="pets">Pets</button>
                    <button class="hashtagButton" data-hashtag="photography">Photography</button>

                 </div>
                  
                    
                </div>
     <!--link Result-->
               
            </div>

            <div class="main_body2">
                <h3><i class="fas fa-fire" style="margin-right: 10px;"></i> Most Popular<span style="margin-left:10px;font-size:15px;">(The Last 7 Days)</span></h3>
                <table class="result_table">
                    <thead>
                      <tr>
                        <th>No</th>
                        <th>Title</th>
                        <th>Videos</th>
                        <th>Views</th>
                      
                      </tr>
                    </thead>
                    <tbody id="linkResults">
                      <!-- Table rows with video data will be inserted here -->
                    </tbody>
                  </table>
                  
            </div>

        </div>
        <!--end of body-->


        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const hashtagButtons = document.querySelectorAll('.hashtagButton');
                const linkResults = document.getElementById('linkResults');
                const mainBody2 = document.querySelector('.main_body2'); // Get reference to main_body2
                const numVideosToFetch = 50;
                const numLinksToDisplay = 10;
                const API_KEY = 'AIzaSyBKrdMTIUyqgOs04HGyfPXljv0HHCVYilc'; // Replace with your actual YouTube Data API key
        
                // Function to handle button click
                function handleButtonClick(button) {
                    // Remove the 'clicked-button' class from all buttons first
                    hashtagButtons.forEach(btn => {
                        btn.classList.remove('clicked-button');
                    });
        
                    // Add the 'clicked-button' class to the clicked button
                    button.classList.add('clicked-button');
        
                    // Clear previous results
                    linkResults.innerHTML = '';
        
                    const hashtag = button.getAttribute('data-hashtag');
        
                    // Calculate the start time and end time for the last 7 days in ISO 8601 format
                    const today = new Date();
                    const sevenDaysAgo = new Date(today);
                    sevenDaysAgo.setDate(today.getDate() - 7);
                    const startTime = sevenDaysAgo.toISOString();
                    const endTime = today.toISOString();
        
                    // Encode the hashtag for the API query
                    const encodedHashtag = encodeURIComponent(`#${hashtag}`);
        
                    // Construct the API query URL with the 'publishedAfter' and 'publishedBefore' parameters
                    const apiUrl = `https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&q=${encodedHashtag}&type=video&part=snippet&maxResults=${numVideosToFetch}&order=viewCount&regionCode=TW&videoDuration=short&publishedAfter=${startTime}&publishedBefore=${endTime}`;
        
                    // Fetch data from the YouTube Data API
                    fetch(apiUrl)
                        .then(response => response.json())
                        .then(data => {
                            if (data.items && data.items.length > 0) {
                                // Extract video data including titles, video IDs, and thumbnails
                                const items = data.items;
                                const videoData = items.map(item => ({
                                    title: item.snippet.title.replace(/#(\w+)/g, ''), // Remove hashtags from the title
                                    videoId: item.id.videoId,
                                    thumbnailUrl: item.snippet.thumbnails.medium.url, // Get the medium-sized thumbnail
                                }));
        
                                // Display the top 10 videos
                                for (let i = 0; i < numLinksToDisplay; i++) {
                                    const video = videoData[i];
                                    const row = document.createElement('tr');
        
                                    // Create the "Number" cell
                                    const numberCell = document.createElement('td');
                                    numberCell.textContent = i + 1;
                                    row.appendChild(numberCell);
        
                                    // Create the "Title" cell with a clickable link and apply the CSS class
                                    const titleCell = document.createElement('td');
                                    const titleLink = document.createElement('a');
                                    titleLink.href = `https://www.youtube.com/shorts/${video.videoId}`;
                                    titleLink.textContent = video.title;
                                    titleLink.target = '_blank';
                                    titleLink.classList.add('video-title'); // Add the CSS class
                                    titleCell.appendChild(titleLink);
                                    row.appendChild(titleCell);
        
                                    // Create the "Videos" cell with the thumbnail image
                                    const videosCell = document.createElement('td');
                                    const videoThumbnail = document.createElement('img');
                                    videoThumbnail.src = video.thumbnailUrl;
                                    videoThumbnail.alt = 'Video Thumbnail';
                                    videoThumbnail.classList.add('video-thumbnail'); // Add the CSS class to resize the image
                                    videosCell.appendChild(videoThumbnail);
                                    row.appendChild(videosCell);
        
                                    // Create a placeholder "Views" cell
                                    const viewsCell = document.createElement('td');
                                    viewsCell.textContent = 'Fetching...';
                                    row.appendChild(viewsCell);
        
                                    linkResults.appendChild(row);
        
                                    // Fetch video statistics (view count)
                                    fetchVideoStatistics(video.videoId, viewsCell);
                                }
        
                                // Show main_body2 when a button is clicked
                                mainBody2.style.display = 'block'; // Show main_body2
                            } else {
                                linkResults.innerHTML = 'No videos found for the hashtag within the last 7 days.';
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            linkResults.innerHTML = 'An error occurred while fetching the links.';
                        });
                }
        
                // Add click event listeners to each button
                hashtagButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        handleButtonClick(button);
                    });
                });
        
                function fetchVideoStatistics(videoId, viewsCell) {
                    const API_KEY = 'AIzaSyAqLZYZ-de8R9O7uv20WMHU-jLRppJXdDI'; // Replace with your actual YouTube Data API key
        
                    const apiUrl = `https://www.googleapis.com/youtube/v3/videos?key=${API_KEY}&id=${videoId}&part=statistics`;
        
                    fetch(apiUrl)
                        .then(response => response.json())
                        .then(data => {
                            if (data.items && data.items.length > 0) {
                                const statistics = data.items[0].statistics;
                                const viewCount = parseInt(statistics.viewCount, 10); // Convert to integer
                                viewsCell.textContent = viewCount.toLocaleString(); // Format with commas
                            } else {
                                viewsCell.textContent = 'N/A';
                            }
                        })
                        .catch(error => {
                            console.error('Error fetching video statistics:', error);
                            viewsCell.textContent = 'Error';
                        });
                }
            });
        </script>
        
        
        



        

</body>
</html>